<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"><title data-react-helmet="true">Calling Functions | IOTA Smart Contract Protocol</title><meta data-react-helmet="true" property="og:url" content="https://iscp.docs.iota.org/docs/guide/schema/call/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Calling Functions | IOTA Smart Contract Protocol"><meta data-react-helmet="true" name="description" content="Synchronous function calls between smart contracts act very similar to how normal function"><meta data-react-helmet="true" property="og:description" content="Synchronous function calls between smart contracts act very similar to how normal function"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://iscp.docs.iota.org/docs/guide/schema/call/"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/guide/schema/call/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/guide/schema/call/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c3cdf61a.css">
<link rel="preload" href="/assets/js/runtime~main.205b93b7.js" as="script">
<link rel="preload" href="/assets/js/main.e408bb30.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/overview/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ISCP Chains and Nodes</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Rust/WASM</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/rust_wasm/introduction/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Schema tool</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/intro/">Smart Contract Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/proxies/">Data Access Proxies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/types/">WasmLib Data Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/context/">Function Call Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/schema/">Smart Contract Schema Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/usage/">Using the Schema Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/structs/">Structured Data Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/typedefs/">Type Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/state/">Smart Contract State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/funcs/">Function Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/access/">Limiting Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/params/">Function Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/results/">Function Results</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/thunks/">Thunk Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/views/">View-Only Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/init/">Smart Contract Initialization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/transfers/">Token Transfers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/funcdesc/">Function Descriptors</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guide/schema/call/">Calling Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/post/">Posting Asynchronous Requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/test/">Testing Smart Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/examples/">Example Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/timelock/">Colored Tokens and Time Locks</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">EVM</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Example projects</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contribute/">Contribute</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Calling Functions</h1></header><p>Synchronous function calls between smart contracts act very similar to how normal function
calls work in any programming language, but with a slight twist. With normal function
calls you share all the memory that you can access with every function that you call.
However, when calling a smart contract function you can only access the memory assigned to
that specific smart contract. Remember, each smart contract runs in its own sandbox
environment. Therefore, the only way to share data between smart contracts that call each
other is through function parameters and return values.</p><p>Synchronous calls can only be made between contracts that are running on the same contract
chain. The ISCP host knows about all the contracts it is running on a chain, and therefore
is able to dispatch the call to the correct contract function. The function descriptor is
used to specify the call parameters (if any) through its <code>params</code> proxy, and to invoke the
function through its <code>func</code> interface.</p><p>In addition, when the function that is called is not a View it is possible to pass tokens
to the function call through this interface. Note that the only way to call a function and
properly pass tokens to it <em>within the same contract</em> is through the function descriptor,
because otherwise the incoming() function will not register any incoming tokens.</p><p>Then the call is made the calling function will be paused and wait for the called function
to complete. After completion, it may access returned values (if any) through
the <code>results</code> proxy of the function descriptor.</p><p>When calling from a View function, it is only possible to call other View functions. The
ScFuncs interface enforces this at compile-time through the ISCP function context that
needs to be passed to the member function that creates the function descriptor.</p><p>Here&#x27;s how a smart contract would tell a <code>dividend</code> contract on the same chain to divide
the 1000 tokens it passes to the function:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Go</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Rust</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> dividend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ScFuncs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Divide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Func</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TransferIotas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let f = dividend::ScFuncs::divide(ctx);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">f.func.transfer_iotas(1000).call();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>And here is how a smart contract would ask a <code>dividend</code> contract on the same chain to
return the dispersion factor for a specific address:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Go</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Rust</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> dividend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ScFuncs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetFactor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Params</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Address</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SetValue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Func</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">factor </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Results</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Factor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Value</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let f = dividend::ScFuncs::get_factor(ctx);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">f.params.address().set_value( &amp; address);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">f.func.call();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let factor = f.results.factor().value();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>You see how we first create a function descriptor for the desired function, then use
the <code>params</code> proxy in the function descriptor to set any required parameters, then direct
the <code>func</code> member of the function descriptor to call the associated function, and finally
we use the <code>results</code> proxy in the function descriptor to retrieve any results we are
interested in.</p><p>Note that the function descriptors assume that the function to be called is associated
with the default Hname of the contract, in this case ScHname::new(&quot;dividend&quot;). If you
deployed the contract that contains the function you want to call under a different name
then you would have to provide its associated Hname to the <code>func</code> member through the
of_contract() member function like this:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Go</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">Rust</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">altContract </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NewScHname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;alternateName&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">f </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> dividend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ScFuncs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Divide</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Func</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">OfContract</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">altContract</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">TransferIotas</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Call</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let altContract = ScHname::new(&quot;alternateName&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let f = dividend::ScFuncs::divide(ctx);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">f.func.of_contract(altContract).transfer_iotas(1000).call();</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>In the next section we will look at how we can request smart contract functions in a
different chain to be executed in a similar way.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/iotaledger/chronicle.rs/tree/main/docs/docs/guide/schema/call.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guide/schema/funcdesc/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Function Descriptors</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guide/schema/post/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Posting Asynchronous Requests Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/">Overview</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IOTA Foundation, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.205b93b7.js"></script>
<script src="/assets/js/main.e408bb30.js"></script>
</body>
</html>
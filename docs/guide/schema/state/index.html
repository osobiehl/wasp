<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons"><title data-react-helmet="true">Smart Contract State | IOTA Smart Contract Protocol</title><meta data-react-helmet="true" property="og:url" content="https://iscp.docs.iota.org/docs/guide/schema/state/"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Smart Contract State | IOTA Smart Contract Protocol"><meta data-react-helmet="true" name="description" content="The smart contract state storage on the host consists of a single key/value map. Both key"><meta data-react-helmet="true" property="og:description" content="The smart contract state storage on the host consists of a single key/value map. Both key"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://iscp.docs.iota.org/docs/guide/schema/state/"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/guide/schema/state/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://iscp.docs.iota.org/docs/guide/schema/state/" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c3cdf61a.css">
<link rel="preload" href="/assets/js/runtime~main.214b6a02.js" as="script">
<link rel="preload" href="/assets/js/main.5ac8063b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo/WASP_logo_dark.png" alt="IOTA" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">ISCP</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/overview/">Documentation</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/overview/">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">ISCP Chains and Nodes</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Rust/WASM</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/rust_wasm/introduction/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Schema tool</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/intro/">Smart Contract Schemas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/proxies/">Data Access Proxies</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/types/">WasmLib Data Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/context/">Function Call Context</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/schema/">Smart Contract Schema Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/usage/">Using the Schema Tool</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/structs/">Structured Data Types</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/typedefs/">Type Definitions</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guide/schema/state/">Smart Contract State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/funcs/">Function Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/access/">Limiting Access</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/params/">Function Parameters</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/results/">Function Results</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/thunks/">Thunk Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/views/">View-Only Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/init/">Smart Contract Initialization</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/transfers/">Token Transfers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/funcdesc/">Function Descriptors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/call/">Calling Functions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/post/">Posting Asynchronous Requests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/test/">Testing Smart Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/examples/">Example Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/schema/timelock/">Colored Tokens and Time Locks</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">EVM</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Example projects</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/contribute/">Contribute</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Smart Contract State</h1></header><p>The smart contract state storage on the host consists of a single key/value map. Both key
and value are raw data bytes. As long as we access the data in the same way that we used
to store it we will always get valid data back. The schema tool will create a type-safe
access layer to make sure that data storage and retrieval always uses the expected data
type.</p><p>The <code>state</code> section in the schema definition file contains a number of field definitions
that together define the variables that are stored in the state storage. Each field
definition uses a JSON key/value pair to define the name and data type of the field.
The JSON key defines the field name. The JSON value (a string) defines the field&#x27;s data
type, and can be followed by an optional comment that describes the field.</p><p>The schema tool will use this information to generate the specific code that accesses the
state variables in a type-safe way. Let&#x27;s examine the <code>state</code> section of the <code>dividend</code>
example in more detail:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">schema.yaml</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_1uMI">schema.json</li></ul><div class="margin-vert--md"><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;state&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;memberList&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[]Address // array with all the recipients of this dividend&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;members&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;[Address]Int64 // map with all the recipient factors of this dividend&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;owner&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;AgentID // owner of contract, the only one who can call &#x27;member&#x27; func&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;totalFactor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Int64 // sum of all recipient factors&quot;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly yaml"><pre tabindex="0" class="prism-code language-yaml codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">state</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">memberList</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[]Address // array with all the recipients of this dividend&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">members</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[Address]Int64 // map with all the recipient factors of this dividend&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">owner</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &#x27;AgentID // owner of contract</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> the only one who can call &#x27;&#x27;member&#x27;&#x27; func&#x27;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">totalFactor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Int64 // sum of all recipient factors</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>Let&#x27;s start with the simplest state variables. <code>totalFactor</code> is an Int64, and <code>owner</code> is
an AgentID. Both are predefined <a href="/docs/guide/schema/types/">WasmLib value types</a>.</p><p>Then we have the <code>memberList</code> variable. The empty brackets <code>[]</code> indicate that this is an
array. The brackets are immediately followed by the homogenous type of the elements in the
array, which in this case is the predefined Address value type.</p><p>Finally, we have the <code>members</code> variable. The non-empty brackets <code>[]</code> indicate that this is
a map. Between the brackets is the homogenous type of the keys, which in this case are of
the predefined Address type. The brackets are immediately followed by the homogenous type
of the values in the map, which in this case are of the predefined Int64 type.</p><p>Here is part of the Rust code in <code>state.rs</code> that the schema tool has generated. The
MutableDividendState struct defines a type-safe interface to access each of the state
variables through mutable proxies:</p><div class="tabs-container"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1uMI tabs__item--active">Go</li></ul><div class="margin-vert--md"><div role="tabpanel"><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> MutableDividendState </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        id </span><span class="token builtin">int32</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s MutableDividendState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">MemberList</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> ArrayOfMutableAddress </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        arrID </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetObjectID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idxMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">IdxStateMemberList</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TYPE_ARRAY</span><span class="token operator" style="color:#393A34">|</span><span class="token plain">wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TYPE_ADDRESS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> ArrayOfMutableAddress</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">objID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> arrID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s MutableDividendState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Members</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> MapAddressToMutableInt64 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        mapID </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">GetObjectID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idxMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">IdxStateMembers</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">TYPE_MAP</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> MapAddressToMutableInt64</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">objID</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> mapID</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s MutableDividendState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Owner</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ScMutableAgentID </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewScMutableAgentID</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idxMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">IdxStateOwner</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s MutableDividendState</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">TotalFactor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">ScMutableInt64 </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> wasmlib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewScMutableInt64</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> idxMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">IdxStateTotalFactor</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div><div role="tabpanel" hidden=""><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">#[derive(Clone, Copy)]</span></span><span class="token-line" style="color:#393A34"><span class="token plain">pub struct MutableDividendState {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub(crate) id: i32,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">impl MutableDividendState {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub fn member_list(&amp;self) -&gt; ArrayOfMutableAddress {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        let arr_id = get_object_id(self.id, idx_map(IDX_STATE_MEMBER_LIST), TYPE_ARRAY | TYPE_ADDRESS);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ArrayOfMutableAddress { obj_id: arr_id }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub fn members(&amp;self) -&gt; MapAddressToMutableInt64 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        let map_id = get_object_id(self.id, idx_map(IDX_STATE_MEMBERS), TYPE_MAP);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        MapAddressToMutableInt64 { obj_id: map_id }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub fn owner(&amp;self) -&gt; ScMutableAgentID {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ScMutableAgentID::new(self.id, idx_map(IDX_STATE_OWNER))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    pub fn total_factor(&amp;self) -&gt; ScMutableInt64 {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        ScMutableInt64::new(self.id, idx_map(IDX_STATE_TOTAL_FACTOR))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></div></div></div><p>As you can see the schema tool has generated a proxy interface for the mutable <code>dividend</code>
state, called <code>MutableDividendState</code>. It has a 1-to-1 correspondence to the <code>state</code>
section in the schema definition file. Each member function accesses a type-safe proxy
object for the corresponding variable. In addition, the schema tool generates any
necessary intermediate map and array proxy types that force the usage of their respective
homogenous types. In the above example both <code>ArrayOfMutableAddress</code> and
<code>MapAddressToMutableInt64</code> are examples of such automatically generated proxy types.
See the full <code>state.rs</code> for more details.</p><p>In the next section we will look at how to define our own structured data types in the
schema definition file.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/iotaledger/chronicle.rs/tree/main/docs/docs/guide/schema/state.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guide/schema/typedefs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Type Definitions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guide/schema/funcs/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Function Definitions Â»</div></a></div></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/overview/">Overview</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IOTA Foundation, Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.214b6a02.js"></script>
<script src="/assets/js/main.5ac8063b.js"></script>
</body>
</html>